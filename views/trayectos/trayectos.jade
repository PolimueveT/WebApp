extend ../layouts/main
block content
    h1 Búsqueda de Trayectos
    .container(ng-controller="BuscarTrayectosCtrl")
        form.form-horizontal(role="form")
            .row
                .col-sm-3
                   .form-group
                        label.col-sm-4.control-label(for="salida") Salida  
                        .col-sm-8
                            input.form-control(name="salida", type="text", placeHolder="Salida")
                .col-sm-3
                   .form-group
                        label.col-sm-4.control-label(for="destino") Destino
                        .col-sm-8
                           input.form-control(name="destino", type="text", placeHolder="Destino")
                .col-sm-4
                    p
                    | Aquí un datepicker
                .col-sm-2
                    button(type="submit") Buscar
                        .btn 

            .row
                .col-xs-3 
                    .panel.panel-default
                        .panel-heading Restricciones
                        .panel-body
                            .form-group
                                label.col-sm-0.control-label(for="noFumadores") No fumadores
                                .col-sm-3
                                    input.form-control(name="noFumadores",type="checkbox", id="NoFumadores") 
                             .form-group
                                label.col-sm-0.control-label(for="noAnimales") No animales
                                .col-sm-3
                                    input.form-control(name="noAnimales",type="checkbox", id="NoAnimales") 
                            .form-group
                                label.col-sm-0.control-label(for="noComida") No comida
                                .col-sm-3
                                    input.form-control(name="noComida",type="checkbox", id="NoComida") 
                            .form-group
                                label.control-label(for="equipaje") Tamaño máx. del equipaje
                                    select.form-control(name="equipaje")
                                        option Mochila
                                        option Maleta
                .col-md-9
                    .panel.panel-default
                        .panel-heading Resultados de búsqueda
                        .panel-body
                                .col-md-12
                                    table.table.table-striped
                                        tr
                                            th Fecha
                                            th Hora Salida
                                            th Origen
                                            th Destino                                       
                                           
                                            th Plazas Disponibles
                                        
                                            tr(ng-repeat="t in trayectos")
                                                script.
                                                    console.log("---"+t);
                                                td {{ t.Fecha_salida}}
                                                td {{ t.Origen }}
                                                td {{ t.Destino }}
                                                td {{ t.Hora_salida }}
                                                td {{ t.Num_plazas - t.Inscritos.length }}
block script
    script(src="/js/BuscarTrayectosCtrl.js")
    script.
        var scope;
        $(document).ready(function (){
            scope = angular.element('[ng-controller="BuscarTrayectosCtrl"]').scope();
            scope.getData();
            scope.$apply();
        });                                               
                                        




                    
                