extend ../layouts/main
block content
	.container(ng-controller="MisTrayectosCtrl")
		form.form-horizontal(role="form", name="crear-trayecto", method="post", action="/prueba")
			h1 Mis trayectos
			.row
				.col-md-12
					.panel.panel-default
						.panel-heading Trayectos que estoy ofreciendo
						.panel-body
							table.table
								tr
									th Num. Plazas
									th Origen
									th Destino
									th Fecha y Hora Salida
									th Precio Plaza
									th Max. Espera
									th Restricciones
									th
								tr(ng-repeat="t in trayectos_ofreciendo")
									td {{ t.Num_plazas }}
									td {{ t.Origen }}
									td {{ t.Destino }}
									td 
										{{ t.fechaFormat }}
										br
										{{ t.fechaHoraSalida }}
									td {{ t.Precio_plaza }}
									td {{ t.Tiempo_max_espera }}
									td 
										span(ng-repeat="(key, r) in t.Restricciones")
											{{ 	key.replace('_', ' ').toUpperCase() }}
											br
									td
										a.btn.btn-primary(href="/trayecto/{{ t.id }}")
											span.glyphicon.glyphicon-eye-open
										|  
										a.btn.btn-danger(ng-click="borrarTrayecto(t.id)")
											span.glyphicon.glyphicon-trash
			.row
				.col-md-12
					.panel.panel-default
						.panel-heading Trayectos que estoy inscrito
						.panel-body
							.col-md-12
								table.table
									tr
										th Num. Plazas
										th Origen
										th Destino
										th Fecha y Hora Salida
										th Precio Plaza
										th Max. Espera
										th Restricciones
										th
									tr(ng-repeat="i in trayectos_inscrito")
										td {{ i.Num_plazas }}
										td {{ i.Origen }}
										td {{ i.Destino }}
										td 
											{{ i.fechaFormat }}
											br
											{{ i.fechaHoraSalida }}
										td {{ i.Precio_plaza }}
										td {{ i.Tiempo_max_espera }}
										td 
											span(ng-repeat="(key, r) in i.Restricciones")
												{{ 	key.replace('_', ' ').toUpperCase() }}
												br
										td
											a.btn.btn-primary(href="/trayecto/{{ t.id }}")
												span.glyphicon.glyphicon-eye-open

block script
	script(src="/js/MisTrayectosCtrl.js")
	script.
		var scope;
		$(document).ready(function (){
			scope = angular.element('[ng-controller="MisTrayectosCtrl"]').scope();
			scope.id_user = 'from_site';
			scope.getData();
			scope.getInscritos();
			scope.$apply();
		});

		function capitaliseFirstLetter(string)
		{
			return string.charAt(0).toUpperCase() + string.slice(1);
		}
